{"version":3,"sources":["components/auth/interceptor.service.js"],"names":["authInterceptor","$rootScope","$q","$cookies","$location","Util","request","config","headers","get","isSameOrigin","url","Authorization","responseError","response","status","path","remove","reject","angular","module","factory"],"mappings":"AAAA;;AAEA,CAAC,YAAW;;AAEV,WAASA,eAAT,CAAyBC,UAAzB,EAAqCC,EAArC,EAAyCC,QAAzC,EAAmDC,SAAnD,EAA8DC,IAA9D,EAAoE;AAClE,WAAO;AACL;AACAC,aAFK,mBAEGC,MAFH,EAEW;AACdA,eAAOC,OAAP,GAAiBD,OAAOC,OAAP,IAAkB,EAAnC;AACA,YAAIL,SAASM,GAAT,CAAa,OAAb,KAAyBJ,KAAKK,YAAL,CAAkBH,OAAOI,GAAzB,CAA7B,EAA4D;AAC1DJ,iBAAOC,OAAP,CAAeI,aAAf,GAA+B,YAAYT,SAASM,GAAT,CAAa,OAAb,CAA3C;AACD;AACD,eAAOF,MAAP;AACD,OARI;;;AAUL;AACAM,mBAXK,yBAWSC,QAXT,EAWmB;AACtB,YAAIA,SAASC,MAAT,KAAoB,GAAxB,EAA6B;AAC3BX,oBAAUY,IAAV,CAAe,QAAf;AACA;AACAb,mBAASc,MAAT,CAAgB,OAAhB;AACD;AACD,eAAOf,GAAGgB,MAAH,CAAUJ,QAAV,CAAP;AACD;AAlBI,KAAP;AAoBD;;AAEDK,UAAQC,MAAR,CAAe,mCAAf,EACGC,OADH,CACW,iBADX,EAC8BrB,eAD9B;AAED,CA3BD","file":"interceptor.service.js","sourcesContent":["'use strict';\n\n(function() {\n\n  function authInterceptor($rootScope, $q, $cookies, $location, Util) {\n    return {\n      // Add authorization token to headers\n      request(config) {\n        config.headers = config.headers || {};\n        if ($cookies.get('token') && Util.isSameOrigin(config.url)) {\n          config.headers.Authorization = 'Bearer ' + $cookies.get('token');\n        }\n        return config;\n      },\n\n      // Intercept 401s and redirect you to login\n      responseError(response) {\n        if (response.status === 401) {\n          $location.path('/login');\n          // remove any stale tokens\n          $cookies.remove('token');\n        }\n        return $q.reject(response);\n      }\n    };\n  }\n\n  angular.module('yeomanOnlineTicketBookingApp.auth')\n    .factory('authInterceptor', authInterceptor);\n})();\n"]}