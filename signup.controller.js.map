{"version":3,"sources":["app/account/signup/signup.controller.js"],"names":["SignupController","Auth","$location","user","errors","submitted","form","$valid","createUser","name","email","password","then","path","catch","err","data","angular","forEach","error","field","$setValidity","message","module","controller"],"mappings":"AAAA;;;;;;IAEMA,gB;AAKJ;;AAEA,4BAAYC,IAAZ,EAAkBC,SAAlB,EAA6B;AAAA;;AAAA,SAL7BC,IAK6B,GALtB,EAKsB;AAAA,SAJ7BC,MAI6B,GAJpB,EAIoB;AAAA,SAH7BC,SAG6B,GAHjB,KAGiB;;AAC3B,SAAKJ,IAAL,GAAYA,IAAZ;AACA,SAAKC,SAAL,GAAiBA,SAAjB;AACD;AATD;;;;;6BAWSI,I,EAAM;AAAA;;AACb,WAAKD,SAAL,GAAiB,IAAjB;;AAEA,UAAIC,KAAKC,MAAT,EAAiB;AACf,aAAKN,IAAL,CAAUO,UAAV,CAAqB;AACjBC,gBAAM,KAAKN,IAAL,CAAUM,IADC;AAEjBC,iBAAO,KAAKP,IAAL,CAAUO,KAFA;AAGjBC,oBAAU,KAAKR,IAAL,CAAUQ;AAHH,SAArB,EAKGC,IALH,CAKQ,YAAM;AACV;AACA,gBAAKV,SAAL,CAAeW,IAAf,CAAoB,GAApB;AACD,SARH,EASGC,KATH,CASS,eAAO;AACZC,gBAAMA,IAAIC,IAAV;AACA,gBAAKZ,MAAL,GAAc,EAAd;;AAEA;AACAa,kBAAQC,OAAR,CAAgBH,IAAIX,MAApB,EAA4B,UAACe,KAAD,EAAQC,KAAR,EAAkB;AAC5Cd,iBAAKc,KAAL,EAAYC,YAAZ,CAAyB,UAAzB,EAAqC,KAArC;AACA,kBAAKjB,MAAL,CAAYgB,KAAZ,IAAqBD,MAAMG,OAA3B;AACD,WAHD;AAID,SAlBH;AAmBD;AACF;;;;;;AAGHL,QAAQM,MAAR,CAAe,8BAAf,EACGC,UADH,CACc,kBADd,EACkCxB,gBADlC","file":"signup.controller.js","sourcesContent":["'use strict';\n\nclass SignupController {\n  //start-non-standard\n  user = {};\n  errors = {};\n  submitted = false;\n  //end-non-standard\n\n  constructor(Auth, $location) {\n    this.Auth = Auth;\n    this.$location = $location;\n  }\n\n  register(form) {\n    this.submitted = true;\n\n    if (form.$valid) {\n      this.Auth.createUser({\n          name: this.user.name,\n          email: this.user.email,\n          password: this.user.password\n        })\n        .then(() => {\n          // Account created, redirect to home\n          this.$location.path('/');\n        })\n        .catch(err => {\n          err = err.data;\n          this.errors = {};\n\n          // Update validity of form fields that match the mongoose errors\n          angular.forEach(err.errors, (error, field) => {\n            form[field].$setValidity('mongoose', false);\n            this.errors[field] = error.message;\n          });\n        });\n    }\n  }\n}\n\nangular.module('yeomanOnlineTicketBookingApp')\n  .controller('SignupController', SignupController);\n"]}