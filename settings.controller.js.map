{"version":3,"sources":["app/account/settings/settings.controller.js"],"names":["SettingsController","Auth","errors","submitted","form","$valid","changePassword","user","oldPassword","newPassword","then","message","catch","password","$setValidity","other","angular","module","controller"],"mappings":"AAAA;;;;;;IAEMA,kB;AAIJ,8BAAYC,IAAZ,EAAkB;AAAA;;AAAA,SAHlBC,MAGkB,GAHT,EAGS;AAAA,SAFlBC,SAEkB,GAFN,KAEM;;AAChB,SAAKF,IAAL,GAAYA,IAAZ;AACD;;;;mCAEcG,I,EAAM;AAAA;;AACnB,WAAKD,SAAL,GAAiB,IAAjB;;AAEA,UAAIC,KAAKC,MAAT,EAAiB;AACf,aAAKJ,IAAL,CAAUK,cAAV,CAAyB,KAAKC,IAAL,CAAUC,WAAnC,EAAgD,KAAKD,IAAL,CAAUE,WAA1D,EACGC,IADH,CACQ,YAAM;AACV,gBAAKC,OAAL,GAAe,gCAAf;AACD,SAHH,EAIGC,KAJH,CAIS,YAAM;AACXR,eAAKS,QAAL,CAAcC,YAAd,CAA2B,UAA3B,EAAuC,KAAvC;AACA,gBAAKZ,MAAL,CAAYa,KAAZ,GAAoB,oBAApB;AACA,gBAAKJ,OAAL,GAAe,EAAf;AACD,SARH;AASD;AACF;;;;;;AAGHK,QAAQC,MAAR,CAAe,8BAAf,EACGC,UADH,CACc,oBADd,EACoClB,kBADpC","file":"settings.controller.js","sourcesContent":["'use strict';\n\nclass SettingsController {\n  errors = {};\n  submitted = false;\n\n  constructor(Auth) {\n    this.Auth = Auth;\n  }\n\n  changePassword(form) {\n    this.submitted = true;\n\n    if (form.$valid) {\n      this.Auth.changePassword(this.user.oldPassword, this.user.newPassword)\n        .then(() => {\n          this.message = 'Password successfully changed.';\n        })\n        .catch(() => {\n          form.password.$setValidity('mongoose', false);\n          this.errors.other = 'Incorrect password';\n          this.message = '';\n        });\n    }\n  }\n}\n\nangular.module('yeomanOnlineTicketBookingApp')\n  .controller('SettingsController', SettingsController);\n"]}